# 3D模型生成功能

## 概述

这个功能允许用户上传一张图片，然后自动生成一个3D模型。生成的3D模型可以用于虚拟试戴等场景。

## 技术栈

- **Java**: 后端服务
- **Python**: 3D模型生成脚本
- **OpenCV**: 图像处理
- **Blender**: 3D模型创建和导出

## 安装步骤

### 1. 安装Python依赖项

```bash
pip install -r requirements.txt
```

### 2. 安装Blender

Blender是一个开源的3D建模软件，需要单独安装。请从[Blender官网](https://www.blender.org/)下载并安装最新版本的Blender。

### 3. 配置Blender路径

确保Blender的可执行文件路径已经添加到系统的PATH环境变量中。这样Python脚本才能调用Blender。

## 使用方法

### 1. 上传图片

用户可以在产品详情页面上传一张图片。

### 2. 生成3D模型

点击"生成3D模型"按钮，系统会自动调用Python脚本生成3D模型。

### 3. 查看3D模型

生成的3D模型会自动保存到服务器的上传目录中，并返回模型路径。用户可以在虚拟试戴页面查看3D模型。

## 实现原理

### 1. 图像处理

Python脚本使用OpenCV对上传的图片进行预处理，包括：
- 转换为灰度图
- 高斯模糊
- 阈值处理
- 形态学操作

### 2. 轮廓提取

Python脚本使用OpenCV提取图像的轮廓，并找到最大的轮廓。

### 3. 3D模型创建

Python脚本使用Blender创建3D模型，包括：
- 清除Blender场景中的所有物体
- 创建一个新的网格
- 从轮廓创建顶点和面
- 应用实体化修改器来创建厚度
- 应用平滑修改器
- 添加材质
- 添加灯光和相机
- 导出3D模型为GLB格式

## 注意事项

- 上传的图片应该是清晰的产品图片，背景应该是单一的颜色。
- 生成3D模型需要一定的时间，取决于图片的大小和复杂度。
- 生成的3D模型可能需要进一步的编辑和优化，才能达到最佳的效果。