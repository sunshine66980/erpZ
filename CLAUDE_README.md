# ERP系统文档 - Claude助手使用指南

## 概述
本文档基于根目录下的MD文件、HTML文件和SQL文件整理，为Claude助手提供ERP系统开发的完整背景信息。

## 系统架构
- **数据库名称**: erp_db
- **框架**: RuoYi若依框架
- **字典系统**: 使用RuoYi现有的字典表 (sys_dict_type, sys_dict_data)
- **数据库版本**: MySQL 8.0+

## 核心业务模块

### 1. 产品管理
#### 产品 dual 分类系统
- **产品类目**（业务品类）：游戏/3C类/母婴/汽配/户外运动/玩具/家居
- **产品分类**（生产类型）：
  - 成品：外采-入库-销售 / 内部生产-入库-销售
  - 半成品：可以直接单品销售 / 需要组合销售
  - 物料：来料生产类型 / 包含相配对的包装辅料
  - 包装辅料：彩盒/外箱/胶布/标签纸/辅料

#### 产品信息字段
- 基本信息：品名、SKU、产品类型（普品/组合）、型号、单位
- 采购信息：采购交期、采购成本、采购备注
- 规格信息：长宽高(CM)、重量(g/kg)
- 特殊功能：1688采购链接（仅采购+老板可见）
- 质检信息：全检/抽检
- 销售渠道：AMZ/1688/MKD/Rakuten-JP/线下合作（多选）

#### 表结构
```sql
- product_category (产品类目表)
- product_classification (产品分类表)
- product_info (产品信息主表)
- product_images (产品图片表)
- product_material_relation (产品辅料关联表)
```

### 2. 采购管理
#### 采购流程
1. **采购计划提交** → 2. **老板审批** → 3. **待采购状态执行**
   - 审批通过：待采购
   - 审批不通过：已拒采购单（记录原因）

#### 核心功能
- **供应商管理**：合作级别（1-5星）、结算方式、支付方式
- **采购合同**：电子公章、PDF下载
- **发货单**：订单号（日期+编号）、查询码（4位数）
- **质检标准**：全检/抽检，供应商自检品质报告
- **模具订单**：返模具费合同管理

#### 表结构
```sql
- supplier_info (供应商信息表)
- supplier_contract (供应商合同表)
- supplier_invoice (供应商发票表)
- purchase_plan (采购计划表)
- purchase_plan_detail (采购计划明细表)
- purchase_order (采购订单表)
- purchase_order_detail (采购订单明细表)
```

### 3. 销售管理
#### 订单类型
- **1688业务**：现金支付/帐期支付
- **线下合作**：月结客户/现金客户

#### 销售订单流程
1. 订单提交 → 2. 订单审批 → 3. 仓库待发货 → 4. 已发货

#### 表结构
```sql
- customer_info (客户信息表)
- sales_order (销售订单表)
- sales_order_detail (销售订单明细表)
```

### 4. 库存管理
#### 入库流程
- **送货类型**：供应商自送/供应商叫车/快递物流/上门自提
- **入库标签**：供应代码、SKU/品名、型号规格、数量、入库日期、二维码

#### 表结构
```sql
- warehouse_info (仓库信息表)
- inventory_stock (库存表)
- inventory_transaction (库存交易记录表)
```

### 5. 财务管理
#### 表结构
```sql
- accounts_receivable (应收账款表)
- accounts_payable (应付账款表)
- finance_subject (财务科目表)
```

## 关键业务规则

### 产品管理规则
1. **双分类系统**：每个产品必须同时属于产品类目和产品分类
2. **SKU唯一性**：产品SKU全局唯一
3. **库存可见**：业务员选择产品时可实时查看库存数量
4. **库存不足**：自动推送到采购计划

### 采购审批规则
1. **采购计划**：需要老板审批
2. **拒单原因**：数量不对/价格不对/更换供应商/采购计划有变
3. **供应商选择**：事先沟通确认发货时间

### 销售订单规则
1. **订单审批**：通过后进入仓库待发货
2. **发货单**：包含物流单号等信息
3. **发票申请**：业务提交→老板审批→财务开票

### 库存管理规则
1. **批次管理**：支持按批次号管理库存
2. **质量状态**：区分不同质量状态的库存
3. **交易记录**：所有库存变动都有详细记录

## 数据字典系统
使用RuoYi框架的字典表，所有ENUM类型改为INT类型关联字典：
- 产品类型、单位、类目、分类
- 供应商合作级别、结算方式
- 采购订单状态、类型
- 销售订单状态、类型
- 库存状态、交易类型
- 财务状态等

## 平台集成需求
### 销售渠道
1. **AMZ**：数据透明，需库存对接
2. **1688**：无特别备货要求
3. **MKD**：数据透明，需备货
4. **Rakuten-JP**：海外平台，需库存和成本对接
5. **线下合作**：数据透明

### 快递对接
- 快递单号与系统对接
- 自动对账功能

## 文件结构
```
/ERP/
├── ERP 系统需求.md                # 基础需求文档
├── ERP系统需求规格说明书.md        # 详细需求规格
├── 采购流程核心阶段.md             # 采购流程说明
├── erpDemo.html                   # HTML演示文件
└── erp_business_init.sql          # 数据库初始化脚本
```

## 开发注意事项
1. **数据库设计**：使用MySQL 8.0+特性（JSON、生成列等）
2. **权限控制**：1688采购链接仅采购+老板可见
3. **文件上传**：支持文档、图片、PDF等格式
4. **审批流程**：采购计划和销售订单需要审批
5. **电子签章**：采购合同需要电子公章功能
6. **数据对接**：与多个销售平台进行数据对接

## 常用字段说明
- **状态字段**：统一使用CHAR(1)，'0'正常，'1'停用
- **创建/更新**：统一包含create_by, create_time, update_by, update_time
- **删除标记**：使用逻辑删除，物理删除需谨慎
- **金额字段**：统一使用DECIMAL类型，保留2位小数
- **数量字段**：使用DECIMAL类型，支持小数数量

## 开发建议
1. **优先级**：产品管理→采购管理→库存管理→销售管理→财务管理
2. **模块化**：每个业务模块独立开发，便于维护
3. **数据完整性**：使用外键约束确保数据一致性
4. **性能优化**：合理创建索引，特别是查询频繁的字段
5. **扩展性**：考虑未来业务扩展，预留相关字段

---
文档版本：1.0  
创建日期：2025年11月6日  
最后更新：2025年11月6日  
文档状态：基于现有文件整理